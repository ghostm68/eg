<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quantum Wordstar Nexus</title>
    <script src="https://unpkg.com/quantum-circuit@0.9.246/dist/quantum-circuit.min.js"></script>

    <style>
        /* (SAME STYLING AS BEFORE - NO CHANGES NEEDED HERE) */
        :root {
            --bg-color: #050505;
            --term-red: #ff2a2a;
            --term-dim: #8f0000;
            --text-white: #eeeeee;
            --glass: rgba(20, 0, 0, 0.8);
            --border-grey: #333333;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-white);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .container {
            width: 900px;
            padding: 2rem;
            border: 1px solid var(--term-dim);
            background: var(--glass);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.15);
            position: relative;
        }

        .container::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(255, 255, 255, 0.02), rgba(255, 0, 0, 0.03));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        h1 {
            color: var(--term-red);
            letter-spacing: 5px;
            border-bottom: 2px solid var(--term-red);
            padding-bottom: 10px;
            text-shadow: 0 0 8px var(--term-dim);
            margin-top: 0;
        }

        .blink { animation: blinker 1s linear infinite; color: #fff; }
        @keyframes blinker { 50% { opacity: 0; } }

        .split-display {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            height: 200px;
        }

        .output-screen {
            flex: 2;
            background: #000;
            border: 1px solid var(--border-grey);
            border-left: 3px solid var(--term-red);
            padding: 20px;
            font-size: 1.1rem;
            line-height: 1.5;
            color: var(--text-white);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.9);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .qasm-screen {
            flex: 1;
            background: #080000;
            border: 1px solid var(--term-dim);
            padding: 10px;
            font-size: 0.75rem;
            color: #aa4444;
            font-family: 'Consolas', monospace;
            overflow-y: auto;
            white-space: pre;
            opacity: 0.8;
        }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: var(--term-dim); }

        button {
            background: transparent;
            border: 1px solid var(--term-red);
            color: var(--term-red);
            padding: 10px 30px;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }

        button:hover {
            background: var(--term-red);
            color: #000;
            box-shadow: 0 0 15px var(--term-red);
        }

        .status {
            font-size: 0.8rem;
            color: #666; 
            margin-top: 15px;
            text-align: right;
            border-top: 1px solid #333;
            padding-top: 5px;
        }
        
        .status span { color: var(--term-red); }
    </style>
</head>
<body>

<div class="container">
    <h1>WORDSTAR <span class="blink">NEXUS</span> // QUANTUM MUSE</h1>
    
    <div style="display: flex; justify-content: space-between; color: #888; font-size: 0.9rem; margin-bottom: 10px;">
        <span>System Status: <span style="color: var(--text-white)">CONNECTED</span></span>
        <!-- UPDATE: Visual label for 9 Qubits -->
        <span>Register: <span style="color: var(--text-white)">9 QUBITS</span></span>
    </div>

    <div class="split-display">
        <div class="output-screen" id="poem-output">
            Awaiting quantum initialization...<br>
            <span style="color: #444">>> Click COLLAPSE to observe.</span>
        </div>
        <div class="qasm-screen" id="qasm-output">// QASM LOG
Waiting for circuit construction...</div>
    </div>

    <button onclick="generateEntropy()">COLLAPSE WAVE FUNCTION</button>

    <div class="status" id="log">
        Tunnel: Active | Encryption: <span>Quantum-512</span>
    </div>
</div>

<script>
    // ============================================
    // 1. DATASETS (EXPAND HERE)
    // ============================================
    // You can add hundreds of lines here. The engine will handle it.
    // Ensure every line ends with a comma "," except the last one.
    
    const openers = [
        "In the silence of the neon void,",
        "Fragments of a lost memory,",
        "Digital ghosts whisper softly,",
        "Under the weight of a dying sun,",
        "Between the static and the signal,", 
        "The sky was the color of a dead channel,",
        "Reflections in the obsidian glass,", 
        "Upon the edge of the event horizon,",
        // PASTE MORE "OPENERS" HERE...
        "A glitch in the fabric of morning,"
    ];

    const middles = [
        "entropy dissolves the concrete,",
        "wires tangle with human veins,",
        "the algorithm learns to weep,",
        "time fractures into binary dust,",
        "the logic gates slam shut,",
        "a heartbeat echoes in the server room,",
        "shadows stretch across the motherboard,",
        "data streams bleed into the rain,",
        // PASTE MORE "MIDDLES" HERE...
        "silence overwrites the protocol,"
    ];

    const closers = [
        "seeking a signal that never comes.",
        "fading into absolute zero.",
        "dreaming of electric sleep.",
        "waiting for the reboot.",
        "lost in the infinite loop.",
        "until the power fails.",
        "becoming one with the noise.",
        "erasing the user history.",
        // PASTE MORE "CLOSERS" HERE...
        "terminating the session."
    ];


    // ============================================
    // 2. QUANTUM LOGIC ENGINE
    // ============================================
    
 function generateEntropy() {
        const poemDisplay = document.getElementById('poem-output');
        const qasmDisplay = document.getElementById('qasm-output');
        const statusLog = document.getElementById('log');
        
        // 1. SETUP QUANTUM SIMULATION
        // (If you get an API later, you would pause this part and fetch the number instead)
        const numQubits = 9; 
        var circuit = new QuantumCircuit(numQubits);

        for(let i = 0; i < numQubits; i++) {
            circuit.addGate("h", i, i);
        }
        circuit.addGate("cx", numQubits-1, [0, numQubits-1]); 

        // 2. MEASUREMENT
        circuit.run();
        const measurement = circuit.measureAll(); 
        const binaryString = measurement.join('');
        const seedValue = parseInt(binaryString, 2);

        // 3. POEM GENERATION
        let idx1 = seedValue;
        let idx2 = seedValue + 15; 
        let idx3 = seedValue + 30; 

        let line1 = openers[idx1 % openers.length];
        let line2 = middles[idx2 % middles.length];
        let line3 = closers[idx3 % closers.length];

        // 4. UI UPDATE (Reordered)
        // We use a "flex" layout inside the string to push the footer to the bottom
        poemDisplay.innerHTML = `
            <div style="margin-bottom: 2rem;">
                ${line1}<br>
                ${line2}<br>
                ${line3}
            </div>

            <!-- TECHNICAL FOOTER -->
            <div style="border-top: 1px dashed #333; padding-top: 10px; font-size: 0.8rem; font-family: 'Consolas', monospace; color: #666;">
                <span style="color: var(--term-red);">>> SOURCE ID:</span> LOCAL_SIM_CLUSTER<br>
                <span>>> VECTOR:</span> |${binaryString}‚ü©<br>
                <span>>> SEED:</span> ${seedValue}
            </div>
        `;

        // 5. QASM UPDATE
        const rawQASM = circuit.exportToQASM();
        qasmDisplay.innerText = "// OPENQASM 2.0 (9-Qubit Register)\n" + rawQASM;

        // 6. STATUS BAR
       statusLog.innerHTML = `Tunnel: Secured | Crypto-Source: <span style="color:var(--term-red)">Berlin-QRNG</span>`;
    }

        // Update Log
        document.getElementById('log').innerHTML = `Tunnel: Active | Entropy: <span>${Math.pow(2, numQubits)} States</span>`;
    }
</script>

</body>
</html>
