<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
     <meta name="viewport" content="width=1024">
        <meta name="keywords" content="typewriter, writing, retro, vintage, text editor, AI, generative, creative writing">
        <meta name="description" content="Experience the nostalgia of a classic typewriter with Wordstar, a web-based app that combines vintage aesthetics with modern AI-powered writing tools. Generate creative text, experiment with different writing styles, and rediscover the joy of putting words on paper (virtually!).">
   <title>WordStar Nexus - Modern Text Editor</title><style>
    <title>WordStar Online</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #121212; color: #f0f0f0; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        .container { padding: 10px; }
        #toolbar { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        #toolbar button { background-color: #cc0000; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; margin-right: 5px; }
        #notebook { background-color: #cc0000; padding: 10px; border-radius: 5px; margin-left: 10px; }
        #notebookText { width: 200px; background-color: #1e1e1e; color: #f0f0f0; border: 1px solid black; padding: 5px; }
        #editor { display: flex; justify-content: space-between; flex-grow: 1; }
        #ace-editor { width: 80%; height: 100%; }
        #main-text-area { width: 100%; height: 100%; background-color: #1e1e1e; color: #f0f0f0; border: none; resize: none; font-family: 'Courier New', monospace; font-size: 16pt; font-weight: bold; padding: 10px; }
        #statusbar { background-color: #cc0000; display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; }
        #statusbar span { font-size: 12px; }
    </style>
</head>
<body>
<div class="container">
    <div id="toolbar">
        <div>
            <button onclick="newDocument()">New</button>
            <button onclick="saveDocument()">Save</button>
            <button onclick="exportTxt()">Export TXT</button>
            <button onclick="exportRtf()">Export RTF</button>
            <button onclick="exportPdf()">Export PDF</button>
            <button onclick="insertPoeticParagraph()">Insert Random Poetic Paragraph</button>
            <button onclick="insertRandomScientificWord()">Random Word</button>
        </div>
        <div id="notebook">
            <textarea id="notebookText" rows="3" placeholder="Write your note here..."></textarea>
            <div>
                <button onclick="insertNoteToEditor()" style="background-color: black; color: #cc0000; border: none; padding: 5px 10px; margin-top: 5px; cursor: pointer;">Insert Note</button>
            </div>
        </div>
    </div>
    <div id="editor">
        <div id="ace-editor" style="width: 80%; height: 500px;"></div>
        <div style="width: 18%; display: flex; flex-direction: column;">
            <div>
                <select id="ai-model-select" style="width: 100%; padding: 5px; margin-bottom: 5px; background-color: #2d2d2d; color: white;">
                    <!-- MODIFICATION 1: Changed GPT-2 to Liquid AI -->
                    <option value="liquid-ai">Liquid AI (Puter API)</option> 
                    <option value="bert">BERT</option>
                    <option value="t5">T5</option>
                    <option value="roberta">RoBERTa</option>
                    <option value="xlnet">XLNet</option>
                    <option value="elmo">ELMo</option>
                    <option value="distilbert">DistilBERT</option>
                    <option value="albert">ALBERT</option>
                    <option value="electra">ELECTRA</option>
                    <option value="markov">Markov Chain</option>
                    <option value="wordassociation">Word Association</option>
                    <option value="randomsentence">Random Sentence Generator</option>
                    <option value="gpt-neo">GPT-Neo</option>
                    <option value="gpt-j">GPT-J</option>
                    <option value="bloom">BLOOM</option>
                    <option value="opt">OPT</option>
                    <option value="llama">LLaMA</option>
                    <option value="tensorflow">TensorFlow</option>
                    <option value="pytorch">PyTorch</option>
                    <option value="huggingface">Hugging Face Transformers</option>
                    <option value="gemma-2b">Gemma 2B</option>
                    <option value="gemma-7b">Gemma 7B</option>
                    <option value="palm">PaLM</option>
                    <option value="bard">Bard</option>
                </select>
                <textarea id="ai-prompt" placeholder="Enter your prompt here" style="width: 100%; padding: 5px; margin-bottom: 5px; height: 60px; background-color: #2d2d2d; color: white;"></textarea>
                <button onclick="generateText()" style="width: 100%; background-color: #cc0000; color: white; border: none; padding: 5px 10px; cursor: pointer; font-size: 12px;">Create Text</button>
            </div>
            <div id="dictionary-results" style="flex-grow: 1; overflow-y: auto; background-color: #2d2d2d; padding: 10px; border: 1px solid #444; font-size: 12px; margin-top: 10px;">
                <div id="ai-response" style="white-space: pre-wrap;">To use the text generation feature:

1. Choose a language model from the dropdown menu.
2. Enter a prompt in the text area.
3. Click the "Create Text" button.

The "Liquid AI" model is connected to a live API and will provide a real response. The other models are offline simulations.
                </div>
            </div>
        </div>
    </div>
</div>
<div id="statusbar">
    <span>WordStar Online - Ready</span>
    <span id="word-count">Words: 0</span>
    <span>Â© MMXXIV www.inkrealm.info</span>
</div>

<script>
    let editor;

    window.onload = function() {
        editor = ace.edit("ace-editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/text");
        editor.session.on('change', updateWordCount);
        updateWordCount();
    };

    function newDocument() {
        if (editor) {
            editor.setValue("");
            updateStatusBar("New document created");
        }
    }

    function saveDocument() {
        if (editor) {
            const content = editor.getValue();
            const blob = new Blob([content], {type: "text/plain;charset=utf-8"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "document.txt";
            a.click();
            URL.revokeObjectURL(url);
            updateStatusBar("Document saved");
        }
    }
    
    function exportTxt() { saveDocument(); }

    function exportRtf() {
        if (editor) {
            const content = editor.getValue();
            const rtfContent = "{\\rtf1\\ansi\\deff0{\\fonttbl{\\f0 Times New Roman;}}\n\n" + content.replace(/\n/g, "\\par\n") + "}";
            const blob = new Blob([rtfContent], {type: "application/rtf"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "document.rtf";
            a.click();
            URL.revokeObjectURL(url);
            updateStatusBar("Document exported as RTF");
        }
    }

    function exportPdf() {
        if (editor && window.jspdf) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text(editor.getValue(), 10, 10);
            doc.save("document.pdf");
            updateStatusBar("Document exported as PDF");
        }
    }

    function insertPoeticParagraph() {
        if (editor) {
            const poeticParagraphs = [
                "Whispers of twilight dance on autumn leaves,\nAs golden hues paint the sky's canvas,\nNature's symphony echoes through the trees,\nA moment of beauty, forever to last.",
                "Moonlit waves caress the shore,\nStars above, a cosmic dance,\nIn this quiet, forevermore,\nWe find life's gentle romance.",
            ];
            editor.insert(poeticParagraphs[Math.floor(Math.random() * poeticParagraphs.length)] + "\n\n");
        }
    }

    function insertRandomScientificWord() {
        if (editor) {
            const scientificWords = ["Quantum", "Photosynthesis", "Entropy", "Mitochondria", "Neuroplasticity"];
            editor.insert(scientificWords[Math.floor(Math.random() * scientificWords.length)] + " ");
        }
    }

    function insertNoteToEditor() {
        if (editor) {
            const noteContent = document.getElementById('notebookText').value;
            if (noteContent.trim() === '') {
                alert('Note is empty.');
                return;
            }
            editor.insert(noteContent + '\n');
        }
    }

    function updateStatusBar(message) {
        document.querySelector('#statusbar span').textContent = "WordStar Online - " + message;
    }

    function updateWordCount() {
        if (editor) {
            const content = editor.getValue();
            const wordCount = content.trim() === '' ? 0 : content.trim().split(/\s+/).length;
            document.getElementById('word-count').textContent = `Words: ${wordCount}`;
        }
    }

    // MODIFICATION 2: Replaced placeholder function with a real API call
    async function generateText() {
        const aiPrompt = document.getElementById('ai-prompt').value;
        const aiModel = document.getElementById('ai-model-select').value;
        const aiResponse = document.getElementById('ai-response');

        if (aiModel === 'liquid-ai') {
            // This is the working model, so we make a real API call
            if (!aiPrompt.trim()) {
                aiResponse.textContent = "Please enter a prompt.";
                return;
            }
            
            aiResponse.textContent = 'Generating with Liquid AI... Please wait.';
            
            try {
                const response = await fetch('https://liquid.puter.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        messages: [{
                            role: 'user',
                            content: aiPrompt
                        }],
                        stream: false // We want the full response at once
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const generatedText = data.choices[0].message.content;
                
                aiResponse.textContent = generatedText;
                
            } catch (error) {
                console.error("API Error:", error);
                aiResponse.textContent = "An error occurred while fetching the response: " + error.message;
            }

        } else {
            // For all other models, use the original placeholder response
            aiResponse.textContent = `Generated text using ${aiModel} model based on prompt: "${aiPrompt}"\n\nThis is a placeholder response. In a full implementation, this would connect to an AI model to generate text. Only the "Liquid AI" option is currently active.`;
        }
    }
</script>
</body>
</html>
