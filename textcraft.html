<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmigaWord textcraft - Web Edition</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: 'Courier New', monospace;
        background-color: #808080;
    }
    .container {
        display: flex;
        flex-direction: column;
        height: 100vh;
        max-width: 900px;
        margin: 0 auto;
        background-color: #c0c0c0;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .menu-bar {
        display: flex;
        background-color: #ffffff;
        padding: 2px;
    }
    .menu-item {
        padding: 2px 10px;
        margin-right: 2px;
        background-color: #ffffff;
        border: 1px solid #000;
        cursor: pointer;
        font-size: 14px;
    }
    .menu-item:first-child {
        background-color: #00a000;
        color: #fff;
    }
    .toolbar {
        display: flex;
        background-color: #c0c0c0;
        padding: 2px;
    }
    .tool-button {
        width: 32px;
        height: 32px;
        background-color: #8080ff;
        border: 1px solid #000;
        margin-right: 2px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        color: #000;
        transition: background-color 0.3s;
    }
    .tool-button:hover {
        background-color: #a0a0ff;
    }
    .tool-button:active {
        background-color: #6060ff;
    }
    .ruler {
        height: 20px;
        background-color: #ffffb0;
        position: relative;
        border-top: 1px solid #000;
        border-bottom: 1px solid #000;
    }
    .ruler-mark {
        position: absolute;
        top: 0;
        width: 1px;
        height: 10px;
        background-color: #000;
    }
    .ruler-number {
        position: absolute;
        top: 10px;
        font-size: 10px;
        transform: translateX(-50%);
    }
    .editor {
        flex-grow: 1;
        padding: 10px;
        overflow-y: auto;
        border: none;
        resize: none;
        font-size: 16px;
        background-color: #fff;
        line-height: 1.5;
        background-image: linear-gradient(#ccc 1px, transparent 1px);
        background-size: 100% 24px;
        background-position: 0 -1px;
    }
    .status-bar {
        background-color: #c0c0c0;
        padding: 2px 5px;
        display: flex;
        justify-content: space-between;
        border-top: 1px solid #000;
        font-size: 12px;
    }
    #drawing-canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
    }
.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none; /* Initially hide the dropdown */
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown-content a:hover {
    background-color: #f1f1f1
}

.dropdown:hover .dropdown-content {
    display: block; /* Show on hover */
}
</style>
</head>
<body>
<div class="container">
    <div class="menu-bar">
        <div class="menu-item dropdown">
            Help
            <div class="dropdown-content">
                <a href="#">About</a>
                <a href="#">User Guide</a>
            </div>
        </div>
        <div class="menu-item dropdown">
            Project
            <div class="dropdown-content">
                <a href="#" id="new-doc">New</a>
                <a href="#" id="save-doc">Save</a>
                <a href="#" id="load-doc">Load</a>
            </div>
        </div>
        <div class="menu-item dropdown">
            Layout
            <div class="dropdown-content">
                <a href="#" id="align-left">Align Left</a>
                <a href="#" id="align-center">Center</a>
                <a href="#" id="align-right">Align Right</a>
            </div>
        </div>
        <div class="menu-item">Styles</div>
        <div class="menu-item">Extras</div>
    </div>
    <div class="toolbar">
        <div class="tool-button" id="magic-wand-btn" title="Toggle Drawing Mode">ü™Ñ</div>
        <div class="tool-button" id="scissors-btn" title="Cut">‚úÇÔ∏è</div>
        <div class="tool-button" id="camera-btn" title="Insert Image">üì∑</div>
        <div class="tool-button" id="stamp-btn" title="Stamp">üñãÔ∏è</div>
        <div class="tool-button" id="paint-roller-btn" title="Fill">üé®</div>
        <div class="tool-button" id="info-btn" title="Information">‚ÑπÔ∏è</div>
        <div class="tool-button" id="bold-btn" title="Bold">B</div>
        <div class="tool-button" id="italic-btn" title="Italic">I</div>
        <div class="tool-button" id="underline-btn" title="Underline">U</div>
        <div class="tool-button" id="font-btn" title="Font">F</div>
        <div class="tool-button" id="text-color-btn" title="Text Color">üé®</div>
        <div class="tool-button" id="undo-btn" title="Undo">‚Ü©Ô∏è</div>
    </div>
    <div class="ruler" id="ruler"></div>
    <div id="editor" class="editor" contenteditable="true" spellcheck="false"></div>
    <canvas id="drawing-canvas"></canvas>
    <div class="status-bar">
        <span id="file-name">untitled</span>
        <span id="cursor-position">Line: 1, Column: 1</span>
        <span id="word-count">Words: 0</span>
    </div>
</div>
    <div class="font-dropdown" id="font-dropdown">
            <a href="#" data-font="Arial">Arial</a>
            <a href="#" data-font="Times New Roman">Times New Roman</a>
            <a href="#" data-font="Courier New">Courier New</a>
       </div>
        </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const ruler = document.getElementById('ruler');
    const editor = document.getElementById('editor');
    const cursorPosition = document.getElementById('cursor-position');
    const wordCount = document.getElementById('word-count');
    const fileName = document.getElementById('file-name');
    const canvas = document.getElementById('drawing-canvas');
    const ctx = canvas.getContext('2d');

    // Create ruler markings
    for (let i = 0; i <= 60; i++) {
        const mark = document.createElement('div');
        mark.className = 'ruler-mark';
        mark.style.left = (i * (100/60)) + '%';
        
        if (i % 10 === 0) {
            mark.style.height = '20px';
            const number = document.createElement('span');
            number.className = 'ruler-number';
            number.textContent = i;
            number.style.left = (i * (100/60)) + '%';
            ruler.appendChild(number);
        }
        
        ruler.appendChild(mark);
    }

    // Update cursor position and word count
    editor.addEventListener('input', updateStatusBar);
    editor.addEventListener('click', updateStatusBar);
    editor.addEventListener('keyup', updateStatusBar);

    function updateStatusBar() {
        const selection = window.getSelection();
        const range = selection.getRangeAt(0);
        const lines = editor.innerText.split('\n');
        let lineNumber = 1;
        let columnNumber = 1;

        for (let i = 0; i < lines.length; i++) {
            if (range.startOffset <= lines[i].length) {
                lineNumber = i + 1;
                columnNumber = range.startOffset + 1;
                break;
            }
            range.startOffset -= lines[i].length + 1; // +1 for the newline character
        }

        cursorPosition.textContent = `Line: ${lineNumber}, Column: ${columnNumber}`;
        wordCount.textContent = `Words: ${editor.innerText.trim().split(/\s+/).length}`;
    }

    // Drawing functionality
    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;

    function resizeCanvas() {
        canvas.width = editor.offsetWidth;
        canvas.height = editor.offsetHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function startDrawing(e) {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY];
    }

    function draw(e) {
        if (!isDrawing) return;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
        [lastX, lastY] = [e.offsetX, e.offsetY];
    }

    function stopDrawing() {
        isDrawing = false;
    }

    let isDrawingMode = false;

    // Implement functionality for all buttons
    document.getElementById('magic-wand-btn').addEventListener('click', () => {
        isDrawingMode = !isDrawingMode;
        if (isDrawingMode) {
            canvas.style.pointerEvents = 'auto';
            editor.contentEditable = 'false';
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
        } else {
            canvas.style.pointerEvents = 'none';
            editor.contentEditable = 'true';
            canvas.removeEventListener('mousedown', startDrawing);
            canvas.removeEventListener('mousemove', draw);
            canvas.removeEventListener('mouseup', stopDrawing);
            canvas.removeEventListener('mouseout', stopDrawing);
        }
    });

    document.getElementById('scissors-btn').addEventListener('click', () => {
        document.execCommand('cut', false, null);
    });

    document.getElementById('camera-btn').addEventListener('click', () => {
        const imgUrl = prompt('Enter the URL of the image:');
        if (imgUrl) {
            document.execCommand('insertImage', false, imgUrl);
        }
    });

    document.getElementById('stamp-btn').addEventListener('click', () => {
        const stamp = prompt('Enter text to stamp:', 'APPROVED');
        if (stamp) {
            const stampSpan = `<span style="color: red; font-weight: bold; border: 2px solid red; padding: 2px;">${stamp}</span>`;
            document.execCommand('insertHTML', false, stampSpan);
        }
    });

    document.getElementById('paint-roller-btn').addEventListener('click', () => {
        const color = prompt('Enter background color (name or hex):', 'yellow');
        if (color) document.execCommand('backColor', false, color);
    });

    document.getElementById('info-btn').addEventListener('click', () => {
        alert('Document Information:\n' +
              `Filename: ${fileName.textContent}\n` +
              `Word Count: ${editor.innerText.trim().split(/\s+/).length}\n` +
              `Character Count: ${editor.innerText.length}`);
    });

    document.getElementById('bold-btn').addEventListener('click', () => document.execCommand('bold', false, null));
    document.getElementById('italic-btn').addEventListener('click', () => document.execCommand('italic', false, null));
    document.getElementById('underline-btn').addEventListener('click', () => document.execCommand('underline', false, null));

    const fontBtn = document.getElementById('font-btn');
    const fontDropdown = document.getElementById('font-dropdown');
    
    fontBtn.addEventListener('click', () => {
        fontDropdown.style.display = fontDropdown.style.display === 'block' ? 'none' : 'block';
    });

    document.querySelectorAll('#font-dropdown a').forEach(item => {
        item.addEventListener('click', event => {
            event.preventDefault();
            const font = event.target.getAttribute('data-font');
            document.execCommand('fontName', false, font);
            fontDropdown.style.display = 'none';
        });
    });

    document.getElementById('text-color-btn').addEventListener('click', () => {
        const color = prompt('Enter text color (name or hex):', 'red');
        if (color) document.execCommand('foreColor', false, color);
    });

    document.getElementById('undo-btn').addEventListener('click', () => document.execCommand('undo', false, null));

    // Implement save and load functionality
    document.getElementById('save-doc').addEventListener('click', () => {
        const content = editor.innerHTML;
        const drawingData = canvas.toDataURL();
        const saveData = JSON.stringify({ content, drawingData });
        const blob = new Blob([saveData], {type: 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `${fileName.textContent}.json`;
        a.click();
    });

    document.getElementById('load-doc').addEventListener('click', () => {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.onchange = e => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.readAsText(file, 'UTF-8');
            reader.onload = readerEvent => {
                const saveData = JSON.parse(readerEvent.target.result);
                editor.innerHTML = saveData.content;
                const img = new Image();
                img.onload = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                };
                img.src = saveData.drawingData;
                fileName.textContent = file.name.replace('.json', '');
                updateStatusBar();
            }
        }
        input.click();
    });
});
</script>
</body>
</html>
