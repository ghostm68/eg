<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaWrite - Enhanced Dark Text Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-tertiary: #666666;
            --accent-primary: #3b82f6;
            --accent-secondary: #60a5fa;
            --border-color: #333333;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-container {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 350px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .new-document-btn {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            margin: 20px;
        }

        .new-document-btn:hover {
            background: var(--accent-secondary);
        }

        /* Dictionary Section - Moved to top */
        .dictionary-section {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .dictionary-section h3 {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #search-input {
            width: 100%;
            padding: 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 10px;
        }

        #search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        #search-button {
            width: 100%;
            padding: 10px;
            background: var(--accent-primary);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }

        #search-button:hover {
            background: var(--accent-secondary);
        }

        .dictionary-results {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 14px;
        }

        .dictionary-results h2 {
            font-size: 16px;
            color: var(--accent-primary);
            margin-bottom: 10px;
        }

        .dictionary-results h3 {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 10px 0 5px 0;
            text-transform: none;
            letter-spacing: 0;
        }

        .dictionary-results p, .dictionary-results li {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-primary);
        }

        .dictionary-results ul {
            padding-left: 20px;
            margin: 10px 0;
        }

        .loading {
            color: var(--text-tertiary);
            font-style: italic;
        }

        /* Web Browser Section */
        .browser-section {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .browser-section h3 {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .browser-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        #browser-url {
            flex: 1;
            padding: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 14px;
        }

        #browser-go {
            padding: 8px 12px;
            background: var(--accent-primary);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
        }

        #browser-frame {
            flex: 1;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: white;
        }

        .browser-note {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-top: 10px;
            line-height: 1.4;
        }

        /* Documents Section */
        .documents-section {
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .documents-section h3 {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .document-item {
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            margin-bottom: 5px;
        }

        .document-item:hover {
            background: var(--bg-tertiary);
        }

        .document-item.active {
            background: var(--accent-primary);
        }

        .document-name {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .document-date {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        /* Main Editor */
        .main-editor {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
        }

        .editor-header {
            padding: 20px 40px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .document-title {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 28px;
            font-weight: 700;
            width: 100%;
            outline: none;
            margin-bottom: 10px;
        }

        .document-title::placeholder {
            color: var(--text-tertiary);
        }

        .document-info {
            display: flex;
            gap: 20px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Toolbar - Enhanced with fonts and export */
        .toolbar {
            padding: 15px 40px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .toolbar-group {
            display: flex;
            background: var(--bg-tertiary);
            border-radius: 6px;
            padding: 4px;
            gap: 2px;
        }

        .toolbar-button {
            background: none;
            border: none;
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-button:hover {
            background: var(--bg-primary);
        }

        .toolbar-button.active {
            background: var(--accent-primary);
        }

        /* Font Selector */
        .font-selector {
            background: var(--bg-tertiary);
            border: none;
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Export Button */
        .export-button {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .export-button:hover {
            background: var(--accent-secondary);
        }

        /* Export Options Dropdown */
        .export-options {
            position: absolute;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px;
            margin-top: 5px;
            display: none;
            flex-direction: column;
            gap: 5px;
            z-index: 100;
        }

        .export-options button {
            background: var(--bg-secondary);
            border: none;
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            text-align: left;
            transition: background 0.2s;
        }

        .export-options button:hover {
            background: var(--bg-primary);
        }

        /* Editor Area */
        .editor-area {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background: var(--bg-primary);
        }

        .editor-content {
            max-width: 800px;
            margin: 0 auto;
            min-height: 100%;
            outline: none;
            font-size: 16px;
            line-height: 1.8;
        }

        .editor-content:focus {
            outline: none;
        }

        /* Status Bar */
        .status-bar {
            padding: 12px 40px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 13px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Footer */
        .footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 15px 40px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 13px;
        }

        /* Typography Styles */
        .editor-content h1 {
            font-size: 32px;
            font-weight: 700;
            margin: 30px 0 20px 0;
            color: var(--text-primary);
        }

        .editor-content h2 {
            font-size: 26px;
            font-weight: 600;
            margin: 25px 0 15px 0;
            color: var(--text-primary);
        }

        .editor-content h3 {
            font-size: 20px;
            font-weight: 600;
            margin: 20px 0 12px 0;
            color: var(--text-primary);
        }

        .editor-content p {
            margin-bottom: 16px;
        }

        .editor-content ul, .editor-content ol {
            margin: 16px 0;
            padding-left: 30px;
        }

        .editor-content li {
            margin-bottom: 8px;
        }

        .editor-content blockquote {
            border-left: 4px solid var(--accent-primary);
            padding-left: 20px;
            margin: 20px 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        .editor-content code {
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .editor-content pre {
            background: var(--bg-tertiary);
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .editor-content pre code {
            background: none;
            padding: 0;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* Word Count Animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .word-count-updating {
            animation: pulse 0.3s ease-in-out;
        }

        /* Font Classes */
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-roboto { font-family: 'Roboto', sans-serif; }
        .font-georgia { font-family: Georgia, serif; }
        .font-courier { font-family: 'Courier New', monospace; }
        .font-arial { font-family: Arial, sans-serif; }
        .font-times { font-family: 'Times New Roman', serif; }
        .font-comic { font-family: 'Comic Sans MS', cursive; }
        .font-verdana { font-family: Verdana, sans-serif; }
    </style>
    <!-- Include Roboto font -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <span>📝</span>
                NovaWrite
            </div>
            
            <button class="new-document-btn">+ New Document</button>
            
            <!-- Dictionary Section - Moved to top -->
            <div class="dictionary-section">
                <h3>Dictionary Lookup</h3>
                <div id="search-container">
                    <input type="text" id="search-input" placeholder="Enter a word to look up">
                    <button id="search-button">Search Dictionary (w/German)</button>
                </div>
                <div id="result" class="dictionary-results"></div>
            </div>

            <!-- Web Browser Section -->
            <div class="browser-section">
           <!-- Web Browser Section -->
<div class="browser-section">
    <h3>DeepSeek AI </h3>
    <div class="browser-controls">
        <input type="text" id="browser-url" placeholder="Enter URL or keep DeepSeek for AI assistance" value="https://chat.deepseek.com">
        <button id="browser-go">Go</button>
    </div>
    <iframe id="browser-frame" src="https://chat.deepseek.com"></iframe>
    <p class="browser-note">
        You're now using DeepSeek AI assistant within NovaWrite. 
        This allows you to get writing help, research assistance, and creative inspiration without leaving your editor.
        You can also change the URL above to any other website for research.
    </p>
</div>
                <p class="browser-note">
                    Note: Due to browser security restrictions, some websites may not load properly in this embedded browser. 
                    This is a simplified browser for quick reference, not a full web browsing experience.
                </p>
            </div>

            <!-- Documents Section -->
            <div class="documents-section">
                <h3>Recent Documents</h3>
                <div class="document-item active">
                    <div class="document-name">Welcome Document</div>
                    <div class="document-date">Just now</div>
                </div>
                <div class="document-item">
                    <div class="document-name">Project Notes</div>
                    <div class="document-date">2 hours ago</div>
                </div>
                <div class="document-item">
                    <div class="document-name">Meeting Minutes</div>
                    <div class="document-date">Yesterday</div>
                </div>
            </div>
        </div>

        <!-- Main Editor -->
        <div class="main-editor">
            <div class="editor-header">
                <input type="text" class="document-title" placeholder="Untitled Document" value="Welcome to NovaWrite">
                <div class="document-info">
                    <span>Last saved: Just now</span>
                    <span>•</span>
                    <span>Auto-save enabled</span>
                </div>
            </div>

            <div class="toolbar">
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="formatBlock" data-value="p">Paragraph</button>
                    <button class="toolbar-button" data-command="formatBlock" data-value="h1">H1</button>
                    <button class="toolbar-button" data-command="formatBlock" data-value="h2">H2</button>
                    <button class="toolbar-button" data-command="formatBlock" data-value="h3">H3</button>
                </div>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="bold" title="Bold">B</button>
                    <button class="toolbar-button" data-command="italic" title="Italic">I</button>
                    <button class="toolbar-button" data-command="underline" title="Underline">U</button>
                </div>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="insertUnorderedList" title="Bullet List">• List</button>
                    <button class="toolbar-button" data-command="insertOrderedList" title="Numbered List">1. List</button>
                </div>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="createLink" title="Create Link">🔗 Link</button>
                </div>
                
                <!-- Font Selector -->
                <div class="toolbar-group">
                    <select class="font-selector" id="font-selector">
                        <option value="font-inter">Inter</option>
                        <option value="font-roboto">Roboto</option>
                        <option value="font-georgia">Georgia</option>
                        <option value="font-courier">Courier New</option>
                        <option value="font-arial">Arial</option>
                        <option value="font-times">Times New Roman</option>
                        <option value="font-comic">Comic Sans</option>
                        <option value="font-verdana">Verdana</option>
                    </select>
                </div>
                
                <!-- Export Button with Dropdown -->
                <div style="position: relative;">
                    <button class="export-button" id="export-button">Export</button>
                    <div class="export-options" id="export-options">
                        <button id="export-html">Export as HTML</button>
                        <button id="export-txt">Export as Text</button>
                        <button id="export-pdf">Export as PDF</button>
                    </div>
                </div>
            </div>

            <div class="editor-area">
                <div class="editor-content font-inter" id="editor" contenteditable="true">
                    <h1>Welcome to NovaWrite</h1>
                    
                    <p>This is a clean, focused writing environment designed for getting your thoughts down without distractions. The dark theme is easy on the eyes during long writing sessions.</p>
                    
                    <h2>New Features</h2>
                    
                    <ul>
                        <li><strong>Multiple Fonts</strong> - Choose from 8 different fonts</li>
                        <li><strong>Export Options</strong> - Save your work as HTML, TXT, or PDF</li>
                        <li><strong>Integrated Browser</strong> - Quick web access for research</li>
                        <li><strong>Dictionary at Your Fingertips</strong> - Now positioned for easy access</li>
                        <li><strong>Clean interface</strong> - No unnecessary clutter</li>
                        <li><strong>Real-time formatting</strong> - See your changes instantly</li>
                        <li><strong>Auto-save</strong> - Never lose your work</li>
                    </ul>
                    
                    <h3>Quick Tips</h3>
                    
                    <p>Use the toolbar above to format your text. You can create:</p>
                    
                    <ol>
                        <li>Headings of different levels</li>
                        <li>Bold and italic text</li>
                        <li>Lists (both bulleted and numbered)</li>
                        <li>Links</li>
                        <li>Change fonts using the font selector</li>
                    </ol>
                    
                    <p>Use the dictionary in the sidebar to look up definitions and translations while you write. The integrated browser allows you to quickly reference online resources without leaving the editor.</p>
                    
                    <blockquote>
                        Good writing is clear thinking made visible. This editor helps you focus on what matters most – your words.
                    </blockquote>
                    
                    <p>Start writing your own content here. Select any text to apply formatting, or place your cursor to start typing anew.</p>
                </div>
            </div>

            <div class="status-bar">
                <div class="status-item">
                    <span>Words: <span id="wordCount">0</span></span>
                    <span>•</span>
                    <span>Characters: <span id="charCount">0</span></span>
                </div>
                <div class="status-item">
                    <span id="current-font">Font: Inter</span>
                    <span>•</span>
                    <span>Ready</span>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <span>Code crafted by DeepSeek • <span id="currentDate"></span></span>
    </footer>

    <!-- Include jsPDF for PDF export functionality -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <script>
        class NovaWrite {
            constructor() {
                this.editor = document.getElementById('editor');
                this.wordCountElement = document.getElementById('wordCount');
                this.charCountElement = document.getElementById('charCount');
                this.currentDateElement = document.getElementById('currentDate');
                this.currentFontElement = document.getElementById('current-font');
                this.fontSelector = document.getElementById('font-selector');
                this.exportButton = document.getElementById('export-button');
                this.exportOptions = document.getElementById('export-options');
                this.browserUrl = document.getElementById('browser-url');
                this.browserGo = document.getElementById('browser-go');
                this.browserFrame = document.getElementById('browser-frame');
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateWordCount();
                this.setCurrentDate();
                this.setupAutoSave();
                this.setupDictionary();
            }

            setupEventListeners() {
                // Toolbar buttons
                document.querySelectorAll('.toolbar-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        const command = e.target.dataset.command;
                        const value = e.target.dataset.value;
                        
                        if (command === 'formatBlock') {
                            document.execCommand('formatBlock', false, value);
                        } else if (command === 'createLink') {
                            this.createLink();
                        } else {
                            document.execCommand(command, false, null);
                        }
                        
                        this.editor.focus();
                    });
                });

                // Editor events
                this.editor.addEventListener('input', () => {
                    this.updateWordCount();
                    this.autoSave();
                });

                this.editor.addEventListener('keydown', (e) => {
                    // Tab key for indentation
                    if (e.key === 'Tab') {
                        e.preventDefault();
                        document.execCommand('indent');
                    }
                    
                    // Shift+Tab for outdentation
                    if (e.key === 'Tab' && e.shiftKey) {
                        e.preventDefault();
                        document.execCommand('outdent');
                    }
                });

                // Document title
                document.querySelector('.document-title').addEventListener('input', () => {
                    this.autoSave();
                });

                // New document button
                document.querySelector('.new-document-btn').addEventListener('click', () => {
                    this.createNewDocument();
                });

                // Document list items
                document.querySelectorAll('.document-item').forEach(item => {
                    item.addEventListener('click', () => {
                        document.querySelectorAll('.document-item').forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                    });
                });

                // Font selector
                this.fontSelector.addEventListener('change', (e) => {
                    const fontClass = e.target.value;
                    // Remove all font classes
                    this.editor.classList.remove('font-inter', 'font-roboto', 'font-georgia', 'font-courier', 
                                                'font-arial', 'font-times', 'font-comic', 'font-verdana');
                    // Add selected font class
                    this.editor.classList.add(fontClass);
                    
                    // Update font display in status bar
                    const fontName = this.fontSelector.options[this.fontSelector.selectedIndex].text;
                    this.currentFontElement.textContent = `Font: ${fontName}`;
                });

                // Export button
                this.exportButton.addEventListener('click', () => {
                    this.exportOptions.style.display = this.exportOptions.style.display === 'flex' ? 'none' : 'flex';
                });

                // Export options
                document.getElementById('export-html').addEventListener('click', () => {
                    this.exportAsHTML();
                    this.exportOptions.style.display = 'none';
                });

                document.getElementById('export-txt').addEventListener('click', () => {
                    this.exportAsTXT();
                    this.exportOptions.style.display = 'none';
                });

                document.getElementById('export-pdf').addEventListener('click', () => {
                    this.exportAsPDF();
                    this.exportOptions.style.display = 'none';
                });

                // Close export options when clicking elsewhere
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.export-button') && !e.target.closest('.export-options')) {
                        this.exportOptions.style.display = 'none';
                    }
                });

                // Browser controls
                this.browserGo.addEventListener('click', () => {
                    this.loadBrowserUrl();
                });

                this.browserUrl.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.loadBrowserUrl();
                    }
                });
            }

            setupDictionary() {
                const searchInput = document.getElementById('search-input');
                const searchButton = document.getElementById('search-button');
                const result = document.getElementById('result');

                const dictionaryUrls = [
                    'https://raw.githubusercontent.com/matthewreagan/WebstersEnglishDictionary/master/dictionary.json',
                    'https://gist.githubusercontent.com/BideoWego/60fbd40d5d1f0f1beca11ba95221dd38/raw/58fb4cce910fbf5fa67a2f0f1f619c09d7b1b373/dictionary.json',
                    'https://raw.githubusercontent.com/adambom/dictionary/master/dictionary.json',
                    'https://raw.githubusercontent.com/hathibelagal/German-English-JSON-Dictionary/master/german_english.json'
                ];

                this.searchDictionary = async (word) => {
                    result.innerHTML = '<p class="loading">Searching...</p>';
                    
                    try {
                        const responses = await Promise.all(dictionaryUrls.map(url => axios.get(url)));
                        const dictionaries = responses.map(response => response.data);
                        
                        let definitionsFound = false;
                        let resultHTML = `<h2>Definitions and Translations for "${word}":</h2>`;

                        dictionaries.forEach((dictionary, index) => {
                            if (index < 3) {
                                if (dictionary[word.toLowerCase()]) {
                                    definitionsFound = true;
                                    const definition = dictionary[word.toLowerCase()];
                                    resultHTML += `
                                        <h3>English Definition (Source ${index + 1}):</h3>
                                        <p>${definition}</p>
                                    `;
                                }
                            } else {
                                // German-English dictionary
                                const germanTranslations = Object.entries(dictionary).filter(([key, value]) => 
                                    value.toLowerCase().includes(word.toLowerCase()) || key.toLowerCase() === word.toLowerCase()
                                );
                                if (germanTranslations.length > 0) {
                                    definitionsFound = true;
                                    resultHTML += `<h3>German Translations:</h3><ul>`;
                                    germanTranslations.forEach(([german, english]) => {
                                        resultHTML += `<li>${german} - ${english}</li>`;
                                    });
                                    resultHTML += `</ul>`;
                                }
                            }
                        });

                        if (definitionsFound) {
                            result.innerHTML = resultHTML;
                        } else {
                            result.innerHTML = `<p>No definition or translation found for "${word}" in any of the sources.</p>`;
                        }
                    } catch (error) {
                        console.error('Error fetching dictionary data:', error);
                        result.innerHTML = '<p>An error occurred while searching. Please try again later.</p>';
                    }
                };

                searchButton.addEventListener('click', () => {
                    const word = searchInput.value.trim();
                    if (word) {
                        this.searchDictionary(word);
                    }
                });

                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const word = searchInput.value.trim();
                        if (word) {
                            this.searchDictionary(word);
                        }
                    }
                });
            }

            loadBrowserUrl() {
                let url = this.browserUrl.value.trim();
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                this.browserFrame.src = url;
            }

            updateWordCount() {
                const text = this.editor.innerText || '';
                const words = text.trim() ? text.trim().split(/\s+/).length : 0;
                const characters = text.length;
                
                this.wordCountElement.textContent = words;
                this.charCountElement.textContent = characters;
                
                // Add animation
                this.wordCountElement.classList.add('word-count-updating');
                this.charCountElement.classList.add('word-count-updating');
                
                setTimeout(() => {
                    this.wordCountElement.classList.remove('word-count-updating');
                    this.charCountElement.classList.remove('word-count-updating');
                }, 300);
            }

            createLink() {
                const url = prompt('Enter URL:');
                if (url) {
                    document.execCommand('createLink', false, url);
                }
            }

            autoSave() {
                // Simulate auto-save
                const saveIndicator = document.querySelector('.document-info');
                saveIndicator.innerHTML = '<span>Last saved: Just now</span><span>•</span><span>Auto-save enabled</span>';
                
                // Simulate brief saving state
                setTimeout(() => {
                    const now = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    saveIndicator.innerHTML = `<span>Last saved: ${now}</span><span>•</span><span>Auto-save enabled</span>`;
                }, 500);
            }

            setupAutoSave() {
                // Auto-save every 30 seconds
                setInterval(() => {
                    this.autoSave();
                }, 30000);
            }

            createNewDocument() {
                const title = prompt('Enter document title:', 'Untitled Document');
                if (title) {
                    document.querySelector('.document-title').value = title;
                    this.editor.innerHTML = '<p>Start writing your new document here...</p>';
                    this.updateWordCount();
                    
                    // Add to documents list
                    const documentsList = document.querySelector('.documents-section');
                    const newDoc = document.createElement('div');
                    newDoc.className = 'document-item';
                    newDoc.innerHTML = `
                        <div class="document-name">${title}</div>
                        <div class="document-date">Just now</div>
                    `;
                    
                    documentsList.appendChild(newDoc);
                    
                    // Set as active
                    document.querySelectorAll('.document-item').forEach(item => item.classList.remove('active'));
                    newDoc.classList.add('active');
                    
                    newDoc.addEventListener('click', () => {
                        document.querySelectorAll('.document-item').forEach(i => i.classList.remove('active'));
                        newDoc.classList.add('active');
                    });
                }
            }

            setCurrentDate() {
                this.currentDateElement.textContent = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }

            exportAsHTML() {
                const title = document.querySelector('.document-title').value || 'Untitled Document';
                const content = this.editor.innerHTML;
                
                const htmlContent = `
<!DOCTYPE html>
<html>
<head>
    <title>${title}</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 { color: #333; }
        h2 { color: #555; }
        h3 { color: #777; }
        blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
        }
        pre {
            background: #f4f4f4;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>${title}</h1>
    ${content}
</body>
</html>`;
                
                this.downloadFile(htmlContent, `${title}.html`, 'text/html');
            }

            exportAsTXT() {
                const title = document.querySelector('.document-title').value || 'Untitled Document';
                const content = this.editor.innerText;
                this.downloadFile(content, `${title}.txt`, 'text/plain');
            }

            exportAsPDF() {
                const title = document.querySelector('.document-title').value || 'Untitled Document';
                const content = this.editor.innerText;
                
                // Use jsPDF to create a PDF
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Set document properties
                doc.setProperties({
                    title: title,
                    subject: 'Document exported from NovaWrite',
                    author: 'NovaWrite User'
                });
                
                // Add title
                doc.setFontSize(20);
                doc.text(title, 20, 20);
                
                // Add content
                doc.setFontSize(12);
                const lines = doc.splitTextToSize(content, 170);
                doc.text(lines, 20, 40);
                
                // Save the PDF
                doc.save(`${title}.pdf`);
            }

            downloadFile(content, filename, contentType) {
                const blob = new Blob([content], { type: contentType });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        // Initialize the editor when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            const editor = new NovaWrite();
        });
    </script>
</body>
</html>
