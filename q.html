<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8) ]><!-->
<!DOCTYPE html>
<html lang="en" class="üëó" data-theme="light">

<meta itemprop="name" content="wordstar nexus"/>	

<meta property="og:url" content="https://www.wordstar.nexus/q"/>	
<!--ink city layout 078
     -Created by www.inkrealm.info 
     (inspired by kessler and garner)
        ja: "ÁßÅ„ÅÆÂÄã‰∫∫ÊÉÖÂ†±„ÇíË≤©Â£≤„Åó„Å™„ÅÑ(„Ç´„É™„Éï„Ç©„É´„Éã„Ç¢Â∑ûÊ∂àË≤ªËÄÖ„Éó„É©„Ç§„Éê„Ç∑„ÉºÊ≥ï)",
        –ß–∞—Å—Ç–Ω–∞—è –ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, Informa√ß√µes pessoais privadas, 
        Pers√≥nulegar uppl√Ωsingar, 
        Private personal information, ·ûñ·üê·ûè·üå·ûò·û∂·ûì·ûï·üí·ûë·û∂·ûõ·üã·ûÅ·üí·ûõ·ûΩ·ûì·ûØ·ûÄ·ûá·ûì
        (Verbraucherschutzgesetz der Pr√§fektur Kalifornien)
        en: "Do Not Sell My Info (KKKalifornia)"---> 
    
 <script>
      function updateBodyMobileClass() {
        const isMobile = window.matchMedia("(max-width: 768px)").matches; // adjust breakpoint as needed
        document.body.classList.toggle("is-mobile", isMobile);
      }

      // Run on load
      document.addEventListener("DOMContentLoaded", updateBodyMobileClass);

      // Run again on resize (optional, so it adapts if window size changes)
      window.addEventListener("resize", updateBodyMobileClass);
    </script>
<head>
    <meta charset="UTF-8">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5">
 
		    
		    <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />
	   <title data-rh="true">www.wordstar.nexus - literature, film, art and more...</title>
    <meta data-rh="true" name="description" content="A writer's website, featuring an unedited manuscript and original art as well as videos. Video and audio downloads. The writer often places notes and even new stories on the homepage. Wordstar includes a rotating typewriter. A unique place for creative souls. A Portal to escape the ordinary. Eclectic and frequently updated."/>
    <meta data-rh="true" property="og:url" content="https://www.wordstar.nexus/q"/>
    <meta data-rh="true" property="og:type" content="website"/>
    <meta data-rh="true" property="og:title" content="WORDSTAR - writing, music, and the visual arts"/>
    <meta http-equiv="onion-location" content="http://yd3r4tdjgg7you3tuq7uyy5hl7tbwzowmd4pcgf6gpgk24hyawcvsjqd.onion" />
    <meta property="tiktok:app_id" content="@twoskinnygirls" />
    <meta name="twitter:site" content="@inkrealm" />
    <meta name="slack-app-id" content="f060RUD44R3" />
	<link rel="icon" type="image/svg+xml" href="https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/svg/inky.svg">
	
    <link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkto.png" />
	<meta property="vk:image" content="https://vk.com/authorwave?z=photo707345788_457239017%2Falbum707345788_0">
			<meta name="copyright" content="Copyright 2026  INKREALM-NEXUS. All rights reserved."/>
    <!-- ‚ùÇ  ¬£  ‚Çø ¬£ 0 ‚àÜÂÖÉ ‚àÜÔø¶ ‚àÜ üÇ∂Ôø•  ¬£ üÇ∂Ôø• ¬£ ·ûØ 0ÂÖÉ ‚àÜÔø¶ ‚àÜ ¬¢·∂Ñ·∂Ñ ‚ùÇ ‚éà ‚ë± ‚ôòùÖô ‚Ç™ —è ‚ô¢ for investment advice : ‚ö° +‚Ä¢1=9=1‚Ä¢7=3‚Ä¢1=0‚Ä¢0=1‚Ä¢1‚Ä¢6‚Ä¢ --->
    
	<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SiteNavigationElement",
  "name": [
    "DisplayWriter",
    "Baked Alaska",
    "38"
  ],
  "url": [
    "https://wordstar.nexus/displaywriter",
    "https://wordstar.nexus/bakedalaska",
    "https://wordstar.nexus/38"
  ]
}
</script>

<meta name="p:domain_verify" content="3b55be68eb5ca93c0411d8779e1fa6c2"/>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Helvetica:wght@400;600;800&family=Oswald:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>  
		<!-- prefetching -->
		<link rel="preconnect" href="https://www.missionjuno.swri.edu">
		<link rel="preconnect" href="d2xkkdgjnsfvb0.cloudfront.net">
		<link rel="dns-prefetch" href="//ajax.googleapis.com">
    <link rel="writer" href="https://www.reddit.com/user/Adorable-Ad-4993/" />
	<link rel="me" href="https://is.nota.live/@Inkrealm" />
	<link rel="preconnect" href="https://raw.githubusercontent.com">
<link rel="dns-prefetch" href="https://raw.githubusercontent.com">

    <style>
        /* ----------  reset & base  ---------- */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'IBM Plex Mono','Courier New',monospace;background:#000;color:#fff;height:100vh;overflow:hidden;position:relative}

        /* ----------  palette  ---------- */
        :root{--black:#000;--white:#fff;--gray-1:#111;--gray-2:#222;--gray-3:#333;--gray-6:#666;--gray-9:#999;--gray-c:#ccc}

        /* ----------  CRT overlay  ---------- */
        #crt-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  /* Inner shadow creates the curved screen vignette look */
  box-shadow: inset 0 0 100px rgba(0,0,0,0.9);
}

.scanline {
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, rgba(255,255,255,0) 50%, rgba(0,0,0,0.5) 50%);
  background-size: 100% 4px;
  /* Combines the rolling movement with a flicker */
  animation: scanline 10s linear infinite, flicker 0.15s infinite;
}

/* Moves the lines */
@keyframes scanline {
  0% { background-position: 0 0; }
  100% { background-position: 0 100%; }
}

/* Creates the electrical flicker */
@keyframes flicker {
  0% { opacity: 0.3; }
  50% { opacity: 0.4; }
  100% { opacity: 0.3; }
}

        /* ----------  splash  ---------- */
        .glitch-splash{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:10000;display:flex;justify-content:center;align-items:center;flex-direction:column;pointer-events:none}
        .glitch-text{font-size:1.5rem;letter-spacing:.5rem;display:flex;align-items:center;gap:15px;color:#fff;text-shadow:0 0 10px rgba(255,255,255,.5)}
        .splash-icon{height:40px;filter:grayscale(100%) contrast(1.5)}
        .glitch-subtext{font-size:.8rem;color:#666;margin-top:15px;letter-spacing:2px}

        /* ----------  header  ---------- */
        .header{position:fixed;top:0;width:100%;background:var(--black);border-bottom:1px solid var(--gray-3);padding:1rem 2rem;z-index:100;display:none;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:10px}
        .logo-icon{height:20px;filter:grayscale(100%)}
        .logo-text{font-size:1.2rem;font-weight:400;letter-spacing:3px;text-transform:uppercase}
        .header-center{display:flex;align-items:center;gap:1rem}
        .model-select{background:var(--gray-1);color:var(--white);border:1px solid var(--gray-3);padding:.5rem 1rem;font-family:'IBM Plex Mono',monospace;font-size:.85rem;outline:none;cursor:pointer;min-width:250px}
        .model-select option{background:var(--black);color:var(--white)}
        .model-select:hover{border-color:var(--gray-6)}
        .status-indicator{display:flex;align-items:center;gap:.5rem;font-size:.9rem}
        .status-dot{width:8px;height:8px;border-radius:50%;background:#0f0;animation:pulse 2s infinite}
        .status-dot.error{background:#f00}
        @keyframes pulse{0%,100%{opacity:.3}50%{opacity:1}}

        /* ----------  layout  ---------- */
        .container{display:flex;height:100vh;padding-top:110px;padding-bottom:30px}
        .writing-container{flex:1;display:none;flex-direction:column;background:var(--black);border-right:1px solid var(--gray-3)}
        .notepad-panel{width:400px;display:none;flex-direction:column;background:var(--black);height:calc(100vh - 110px - 30px)}
        .notepad-header{padding:1rem 1.5rem;background:var(--gray-1);border-bottom:1px solid var(--gray-3);font-size:.8rem;color:var(--gray-6);display:flex;justify-content:space-between;text-transform:uppercase;letter-spacing:1px}
        .notepad-actions{display:flex;gap:15px}
        .notepad-btn{cursor:pointer;color:var(--gray-9);transition:color .2s}
        .notepad-btn:hover{color:var(--white)}
        .notepad-area{flex:1;background:var(--black);color:var(--gray-c);border:none;padding:1.5rem;font-family:'IBM Plex Mono',monospace;font-size:.9rem;resize:none;outline:none;line-height:1.6}

        /* ----------  chat  ---------- */
        .chat-messages{flex:1;overflow-y:auto;padding:2rem;display:flex;flex-direction:column;gap:1.5rem}
        .message{max-width:80%;line-height:1.6;font-family:'Courier New',monospace}
        .message.user{align-self:flex-end;text-align:right;color:var(--gray-9);font-style:italic}
        .message.ai{align-self:flex-start;color:var(--gray-c)}
        .message.system{align-self:center;font-size:.9rem;text-align:center;max-width:90%;color:var(--gray-6)}
        .message-header{font-size:.7rem;color:var(--gray-6);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:1px}

        /* ----------  input  ---------- */
        .input-container{border-top:1px solid var(--gray-3);padding:1.5rem 2rem;background:var(--gray-1)}
        .input-row{display:flex;gap:1rem;align-items:stretch}
        .text-input{flex:1;padding:1rem;background:var(--black);border:1px solid var(--gray-3);color:var(--white);font-family:'IBM Plex Mono',monospace;font-size:.95rem;resize:none;min-height:100px;line-height:1.6}
        .text-input:focus{outline:none;border-color:var(--white)}
        .send-button{padding:1rem 2rem;background:var(--black);border:1px solid var(--white);color:var(--white);font-family:'IBM Plex Mono',monospace;font-weight:bold;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:all .2s;min-height:100px}
        .send-button:hover{background:var(--white);color:var(--black)}
        .send-button:disabled{opacity:.5;cursor:not-allowed}

        /* ----------  footer  ---------- */
        .footer{position:fixed;bottom:0;width:100%;height:30px;background:var(--black);border-top:1px solid var(--gray-3);display:none;align-items:center;padding:0 2rem;justify-content:space-between;font-size:.7rem;color:var(--gray-6);z-index:90}
        .footer a{color:var(--gray-9);text-decoration:none}
        .footer a:hover{color:var(--white)}

        /* ----------  scrollbar  ---------- */
        ::-webkit-scrollbar{width:8px}
        ::-webkit-scrollbar-track{background:var(--gray-1)}
        ::-webkit-scrollbar-thumb{background:var(--gray-3)}
        ::-webkit-scrollbar-thumb:hover{background:var(--gray-6)}

        /* ----------  loader  ---------- */
        .loading-dots::after{content:'';animation:loading-dots 1.5s steps(4,end) infinite}
        @keyframes loading-dots{0%,20%{content:'.'}40%{content:'..'}60%{content:'...'}80%,100%{content:''}}
    </style>
    <style>
    /* ORB CONTAINER */
.orb-container {
    display: inline-block;
    vertical-align: middle;
    margin-right: 15px; /* Spacing between orb and title */
    width: 50px;
    height: 50px;
    position: relative;
}

/* THE SVG SHAPE */
.glitch-orb {
    width: 100%;
    height: 100%;
    fill: none;
    stroke-width: 3;
    overflow: visible;
}

/* PARTS COLORS */
.orb-circle { stroke: #ff0033; } /* Red Circle */
.orb-triangle { stroke: #ffffff; } /* White Triangle */

/* IDLE ANIMATION (Slow breathe/rotate) */
.orb-container svg {
    animation: slow-spin 10s linear infinite;
    filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4));
    transition: all 0.2s ease;
}

/* HOVER STATE (The Glitch) */
.orb-container:hover svg {
    animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) 
            drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8));
}

.orb-container:hover .orb-triangle {
    fill: rgba(255, 255, 255, 0.1);
}

/* KEYFRAMES */
@keyframes slow-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes glitch-shake {
    0% { transform: translate(0) rotate(0deg); }
    20% { transform: translate(-2px, 2px) rotate(-5deg); }
    40% { transform: translate(-2px, -2px) rotate(5deg); }
    60% { transform: translate(2px, 2px) rotate(-5deg); }
    80% { transform: translate(2px, -2px) rotate(5deg); }
    100% { transform: translate(0) rotate(0deg); }
}
 /* ---------- LIVE FEED ---------- */
.live-feed {
    padding: 1rem 1.5rem;
    font-size: .75rem;
    color: var(--gray-c);
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
}

.feed-section {
    line-height: 1.5;
}

.feed-title {
    color: var(--gray-6);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: .25rem;
}

.feed-item {
    color: var(--white);
    font-family: 'IBM Plex Mono', monospace;
}
.notepad-panel {
    overflow-y: auto;
}
        
          /* --- QR CODE INTERACTION --- */
#ton-qr {
    width: 60px; /* Compact default size */
    border: 1px solid #ff0033;
    padding: 2px;
    background: #000;
    cursor: zoom-in; /* Shows magnifying glass */
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Mechanical bounce */
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.2);
    position: relative; 
    z-index: 10001; /* Sits above standard text */
}

#ton-qr:hover {
    box-shadow: 0 0 20px rgba(255, 0, 51, 0.6);
    border-color: #fff;
}

/* THE EXPANDED STATE (Toggled by JS) */
#ton-qr.expanded {
    transform: scale(3.5); /* 3.5x Size */
    z-index: 999999; /* Must be higher than CRT overlay (9999) */
    border-color: #ff0033;
    box-shadow: 0 0 100px rgba(0, 0, 0, 0.9), 0 0 50px rgba(255, 0, 51, 0.8);
    cursor: zoom-out;
}
/* ----------  article editor  ---------- */
.article-panel{width:400px;display:flex;flex-direction:column;background:#8b0000;border-right:1px solid var(--gray-3);flex-shrink:0;min-width:400px;height:calc(100vh - 110px - 30px)}

.article-header {
    padding: 1rem 1.5rem;
    background: var(--gray-1);
    border-bottom: 1px solid var(--gray-3);
    font-size: .8rem;
    color: var(--gray-6);
    text-transform: uppercase;
    letter-spacing: 1px;
}

article {
    flex: 1;
    background: #8b0000;
    color: #000;
    border: none;
    padding: 1.5rem;
    font-family: 'IBM Plex Mono', monospace;
    font-size: .9rem;
    resize: none;
    outline: none;
    line-height: 1.6;
    overflow-y: auto;
}

article:empty::before {
    content: 'Article auto-saves to URL hash. Use # for title.\A\AExample:\A# My Story\A\AOnce upon a time...';
    color: #fff; /* White text on dark red background */
    font-style: italic;
    pointer-events: none;
    white-space: pre-wrap;
    display: block;
    opacity: 0.6; /* Subtle so it's clearly a placeholder */
}

article:focus::before {
    content: '';
}

/* Make chat input smaller */
.text-input {
    min-height: 60px; /* was 100px */
}

.send-button {
    min-height: 60px; /* was 100px */
    padding: .75rem 1.5rem; /* was 1rem 2rem */
}   
/* Responsive wordstar.neXus Logo Styles */

.wordstar-logo {
    display: block;
    width: 100%;
    max-width: 666px; /* Full size on desktop */
    height: auto;
}

/* Tablet and smaller */
@media (max-width: 1024px) {
    .wordstar-logo {
        max-width: 500px; /* 75% of original */
    }
}

/* Mobile landscape and smaller */
@media (max-width: 768px) {
    .wordstar-logo {
        max-width: 400px; /* 60% of original */
    }
}

/* Mobile portrait */
@media (max-width: 480px) {
    .wordstar-logo {
        max-width: 320px; /* 48% of original - fits "wordstar.neXus" */
    }
}

/* Small mobile */
@media (max-width: 360px) {
    .wordstar-logo {
        max-width: 280px; /* 42% of original - even tighter fit */
    }
}

/* Container-based approach (if logo is in a specific container) */
.logo-container .wordstar-logo {
    width: 100%;
    max-width: 100%; /* Let container control size */
    height: auto;
}

/* Alternative: Fixed height approach for consistent sizing */
.wordstar-logo-fixed {
    display: block;
    height: 60px; /* Fixed height on desktop */
    width: auto;
}

@media (max-width: 768px) {
    .wordstar-logo-fixed {
        height: 45px; /* Smaller on tablet */
    }
}

@media (max-width: 480px) {
    .wordstar-logo-fixed {
        height: 35px; /* Even smaller on mobile */
    }
}

/* If you need it inline with text */
.wordstar-logo-inline {
    display: inline-block;
    height: 1.5em; /* Scales with text size */
    width: auto;
    vertical-align: middle;
}		
    </style>
</head>
<body>
    <div id="crt-overlay"><div class="scanline"></div></div>

    <!-- Splash -->
    <div id="glitch-splash" class="glitch-splash">
        <div class="glitch-container" style="text-align:center">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 666 88" class="wordstar-logo">
  <defs>
    <style>
      .logo-text { fill: #b31419; }
      .logo-x { 
        fill: #f7f8fa;
        transition: all 0.3s ease;
        transform-origin: center;
      }
      .logo-x:hover { 
        fill: #5f6061;
        filter: drop-shadow(0 0 8px #4169E1);
        transform: scale(1.15) rotate(5deg);
      }
    </style>
  </defs>	
			  <!-- wordstar.neXus - Yellow text with larger blue X -->
  <g class="logo-text">
    

    <path d="M 25 25 L 32 25 L 39 60 L 46 25 L 52 25 L 59 60 L 66 25 L 73 25 L 63 68 L 57 68 L 50 35 L 43 68 L 37 68 Z"/>
    
 
    <path d="M 90 23 Q 105 23 105 45.5 Q 105 68 90 68 Q 75 68 75 45.5 Q 75 23 90 23 Z M 90 28 Q 82 28 82 45.5 Q 82 63 90 63 Q 98 63 98 45.5 Q 98 28 90 28 Z"/>
    
 
    <path d="M 120 25 L 127 25 L 127 33 Q 130 25 138 25 L 140 25 L 140 31 L 136 31 Q 127 31 127 40 L 127 68 L 120 68 Z"/>
    
 
    <path d="M 155 25 L 172 25 Q 187 25 187 46.5 Q 187 68 172 68 L 155 68 Z M 162 30 L 162 63 L 171 63 Q 180 63 180 46.5 Q 180 30 171 30 Z"/>
    
    

    <path d="M 202 25 Q 217 25 217 35 L 210 35 Q 210 30 202 30 Q 197 30 197 33.5 Q 197 37 202 38 L 210 40 Q 219 42 219 51 Q 219 68 205 68 Q 190 68 190 57 L 197 57 Q 197 63 205 63 Q 211 63 211 59 Q 211 56 206 54.5 L 198 52.5 Q 190 50.5 190 42 Q 190 25 202 25 Z"/>
    

    <path d="M 232 18 L 239 18 L 239 25 L 247 25 L 247 30 L 239 30 L 239 58 Q 239 63 243 63 L 247 63 L 247 68 L 241 68 Q 232 68 232 58 L 232 30 L 226 30 L 226 25 L 232 25 Z"/>
    
  
    <path d="M 265 25 Q 279 25 279 42 L 279 68 L 272 68 L 272 63 Q 268 68 260 68 Q 248 68 248 58 Q 248 48 260 48 L 272 48 L 272 42 Q 272 30 264 30 Q 257 30 256 36 L 249 36 Q 250 25 265 25 Z M 272 53 L 261 53 Q 255 53 255 58 Q 255 63 261 63 Q 272 63 272 53 Z"/>
    
  
    <path d="M 294 25 L 301 25 L 301 33 Q 304 25 312 25 L 314 25 L 314 31 L 310 31 Q 301 31 301 40 L 301 68 L 294 68 Z"/>
    
    <circle cx="330" cy="63" r="3"/>
    

    <path d="M 350 25 L 357 25 L 357 31 Q 361 25 370 25 Q 382 25 382 37 L 382 68 L 375 68 L 375 38 Q 375 30 368 30 Q 357 30 357 42 L 357 68 L 350 68 Z"/>
    
    <path d="M 397 25 Q 412 25 412 42 L 398 42 Q 398 50 398 52 Q 398 63 406 63 Q 411 63 412 58 L 419 58 Q 418 68 406 68 Q 391 68 391 46.5 Q 391 25 406 25 Z M 398 37 L 405 37 Q 405 30 406 30 Q 412 30 412 37 Z"/>
  </g>
  

  <g class="logo-x" style="cursor: pointer;">
  
    <path d="M 435 18 L 449 18 L 465 40 L 481 18 L 495 18 L 473 46.5 L 497 75 L 483 75 L 465 51 L 447 75 L 433 75 L 457 46.5 Z"/>
  </g>
  
  <g class="logo-text">

    <path d="M 512 25 L 519 25 L 519 55 Q 519 63 526 63 Q 537 63 537 51 L 537 25 L 544 25 L 544 68 L 537 68 L 537 62 Q 533 68 524 68 Q 512 68 512 56 Z"/>
    

    <path d="M 559 25 Q 574 25 574 35 L 567 35 Q 567 30 559 30 Q 554 30 554 33.5 Q 554 37 559 38 L 567 40 Q 576 42 576 51 Q 576 68 562 68 Q 547 68 547 57 L 554 57 Q 554 63 562 63 Q 568 63 568 59 Q 568 56 563 54.5 L 555 52.5 Q 547 50.5 547 42 Q 547 25 559 25 Z"/>
  </g>
</svg>
            <div class="glitch-text">
                /Q<img src="https://raw.githubusercontent.com/ghostm68/pantheon/main/Media_230212_132842.gif" class="splash-icon" alt="TINK">_
            </div><div class="orb-container">
            <svg class="glitch-orb" viewBox="0 0 100 100">
                <circle class="orb-circle" cx="50" cy="50" r="45" />
                <polygon class="orb-triangle" points="50,25 78,75 22,75" />
            </svg>
        </div>
            <div class="glitch-subtext">ai + Auto-Saved notes to URL</div>
            <div class="glitch-subtext" style="font-size:.7rem;margin-top:15px;opacity:.7">INITIALIZING PROTOCOL‚Ä¶</div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="logo">
		                
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 666 88" class="wordstar-logo">
  <defs>
    <style>
      .logo-text { fill: #ffd700; }
      .logo-x { 
        fill: #f7f8fa;
        transition: all 0.3s ease;
        transform-origin: center;
      }
      .logo-x:hover { 
        fill: #5f6061;
        filter: drop-shadow(0 0 8px #a60813);
        transform: scale(1.15) rotate(5deg);
      }
    </style>
  </defs>	
              <!-- wordstar.neXus - Yellow text with larger blue X -->
  <g class="logo-text">
    

    <path d="M 25 25 L 32 25 L 39 60 L 46 25 L 52 25 L 59 60 L 66 25 L 73 25 L 63 68 L 57 68 L 50 35 L 43 68 L 37 68 Z"/>
    
 
    <path d="M 90 23 Q 105 23 105 45.5 Q 105 68 90 68 Q 75 68 75 45.5 Q 75 23 90 23 Z M 90 28 Q 82 28 82 45.5 Q 82 63 90 63 Q 98 63 98 45.5 Q 98 28 90 28 Z"/>
    
 
    <path d="M 120 25 L 127 25 L 127 33 Q 130 25 138 25 L 140 25 L 140 31 L 136 31 Q 127 31 127 40 L 127 68 L 120 68 Z"/>
    
 
    <path d="M 155 25 L 172 25 Q 187 25 187 46.5 Q 187 68 172 68 L 155 68 Z M 162 30 L 162 63 L 171 63 Q 180 63 180 46.5 Q 180 30 171 30 Z"/>
    
    

    <path d="M 202 25 Q 217 25 217 35 L 210 35 Q 210 30 202 30 Q 197 30 197 33.5 Q 197 37 202 38 L 210 40 Q 219 42 219 51 Q 219 68 205 68 Q 190 68 190 57 L 197 57 Q 197 63 205 63 Q 211 63 211 59 Q 211 56 206 54.5 L 198 52.5 Q 190 50.5 190 42 Q 190 25 202 25 Z"/>
    

    <path d="M 232 18 L 239 18 L 239 25 L 247 25 L 247 30 L 239 30 L 239 58 Q 239 63 243 63 L 247 63 L 247 68 L 241 68 Q 232 68 232 58 L 232 30 L 226 30 L 226 25 L 232 25 Z"/>
    
  
    <path d="M 265 25 Q 279 25 279 42 L 279 68 L 272 68 L 272 63 Q 268 68 260 68 Q 248 68 248 58 Q 248 48 260 48 L 272 48 L 272 42 Q 272 30 264 30 Q 257 30 256 36 L 249 36 Q 250 25 265 25 Z M 272 53 L 261 53 Q 255 53 255 58 Q 255 63 261 63 Q 272 63 272 53 Z"/>
    
  
    <path d="M 294 25 L 301 25 L 301 33 Q 304 25 312 25 L 314 25 L 314 31 L 310 31 Q 301 31 301 40 L 301 68 L 294 68 Z"/>
    
    <circle cx="330" cy="63" r="3"/>
    

    <path d="M 350 25 L 357 25 L 357 31 Q 361 25 370 25 Q 382 25 382 37 L 382 68 L 375 68 L 375 38 Q 375 30 368 30 Q 357 30 357 42 L 357 68 L 350 68 Z"/>
    
    <path d="M 397 25 Q 412 25 412 42 L 398 42 Q 398 50 398 52 Q 398 63 406 63 Q 411 63 412 58 L 419 58 Q 418 68 406 68 Q 391 68 391 46.5 Q 391 25 406 25 Z M 398 37 L 405 37 Q 405 30 406 30 Q 412 30 412 37 Z"/>
  </g>
  

  <g class="logo-x" style="cursor: pointer;">
  
    <path d="M 435 18 L 449 18 L 465 40 L 481 18 L 495 18 L 473 46.5 L 497 75 L 483 75 L 465 51 L 447 75 L 433 75 L 457 46.5 Z"/>
  </g>
  
  <g class="logo-text">

    <path d="M 512 25 L 519 25 L 519 55 Q 519 63 526 63 Q 537 63 537 51 L 537 25 L 544 25 L 544 68 L 537 68 L 537 62 Q 533 68 524 68 Q 512 68 512 56 Z"/>
    

    <path d="M 559 25 Q 574 25 574 35 L 567 35 Q 567 30 559 30 Q 554 30 554 33.5 Q 554 37 559 38 L 567 40 Q 576 42 576 51 Q 576 68 562 68 Q 547 68 547 57 L 554 57 Q 554 63 562 63 Q 568 63 568 59 Q 568 56 563 54.5 L 555 52.5 Q 547 50.5 547 42 Q 547 25 559 25 Z"/>
  </g>
</svg>
            <div class="logo-text">/Q</div>    <!-- THE QR CODE (Clickable) -->
    <img id="ton-qr" 
         src="https://raw.githubusercontent.com/ghostm68/pantheon/main/inkrealm.ton03.jpeg" 
         alt="TON WALLET"
         onclick="this.classList.toggle('expanded')"
         title="Click to Enlarge">
        </div> 
<div class="header-center" style="display:flex; align-items:center; gap: 15px;">
    <!-- 1. THE SELECTOR -->
  <select id="model-select">
    <optgroup label="FEATHERWEIGHT CORES (Under 800MB)">
        <option value="smol-360">SMOL 360M (The Lite Choice)</option>
        <option value="qwen-tiny">QWEN 0.5B (The Smart Choice)</option>
        <option value="tiny-llama">TINY LLAMA (The Speed Choice)</option>
    </optgroup>
    <optgroup label="CLOUD MODULES">
        <option value="nova">NOVA LITE (OpenRouter)</option>
        <option value="dolphin">DOLPHIN (OpenRouter)</option>
    </optgroup>
</select>

    <!-- 2. THE LOCAL CORE MODULE (Compact) -->
    <div id="local-node-panel" style="border-left: 1px solid var(--gray-3); padding-left: 15px; min-width: 200px; text-align: left;">
        <div style="font-size: 0.6rem; color: #ff0033; letter-spacing: 1px; margin-bottom: 2px; font-weight: bold; text-transform: uppercase;">
            LOCAL NEURAL CORE
        </div>
        
        <div id="download-status" style="display:none; margin-bottom: 4px;">
            <div style="font-size: 0.55rem; color: #aaa;">SYNCING WEIGHTS: <span id="progress-percent">0</span>%</div>
            <div style="width: 100%; height: 2px; background: #222; margin-top: 2px;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: #ff0033;"></div>
            </div>
        </div>

        <button id="loadCoreBtn" style="background: transparent; border: 1px solid #444; color: #888; font-family: 'IBM Plex Mono', monospace; font-size: 0.6rem; padding: 2px 6px; cursor: pointer; text-transform: uppercase;">
            ACTIVATE ON-DEVICE Q
        </button>

        <div style="font-size: 0.5rem; color: #555; line-height: 1.2; margin-top: 3px; font-style: italic;">
           *Downloads 420MB to browser cache. Requires WebGPU. Private/Offline after sync.
        </div>
    </div>

    <!-- 3. THE KEYS -->
    <div id="byok-keys" style="display:none; margin-left:10px; gap:5px;">
        <input type="password" id="or-key" placeholder="OR KEY" style="background:#111; color:#fff; border:1px solid #333; font-size:10px; width:60px;">
        <input type="password" id="v-key" placeholder="V KEY" style="background:#111; color:#fff; border:1px solid #333; font-size:10px; width:60px;">
        <input type="password" id="groq-key" placeholder="GROQ KEY" style="background:#111; color:#fff; border:1px solid #333; font-size:10px; width:60px;">
        <input type="password" id="hf-key" placeholder="HF KEY" style="background:#111; color:#fff; border:1px solid #333; font-size:10px; width:60px;">
    </div>
</div>
        <div class="status-indicator">
            <span id="status-text">CONNECTING</span>
            <div id="status-dot" class="status-dot"></div>
        </div>
    </header>

    <!-- Main -->
    <div class="container">
    <aside class="article-panel">
        <div class="article-header">Live Document Editor</div>
        <article contenteditable="plaintext-only" spellcheck></article>
    </aside>
        <main class="writing-container" id="writing-container">
            <div class="chat-messages" id="chat-messages">
                <div class="message system">System Ready. Chat Mode Active.</div>
            </div>
            <div class="input-container">
                <div class="input-row">
                    <textarea id="text-input" class="text-input" placeholder="Enter message..."></textarea>
                    <button id="send-button" class="send-button" type="button">SEND</button>
                </div>
            </div>
        </main>

      <aside class="notepad-panel" id="notepad-panel">
    <div class="notepad-header">
        <span>SCRATCHPAD</span>
        <div class="notepad-actions">
            <span class="notepad-btn" id="export-notepad">EXPORT</span>
            <span class="notepad-btn" id="clear-notepad">CLEAR</span>
        </div>
    </div>

    <textarea id="notepad"
              class="notepad-area"
              placeholder="Notes, stories, and poems..."></textarea>

    <!-- LIVE FEED HEADER -->
<div class="notepad-header" style="border-top:1px solid var(--gray-3)">
    <span>LIVE FEED</span>
</div>

<div class="live-feed">
        <div class="feed-title">POETRY PULSE</div>
        <div id="feed-news" class="feed-item">scanning‚Ä¶</div>
    </div>

    <div class="feed-section">
        <div class="feed-title">MRKT ¬∑ TON</div>
        <div id="feed-market" class="feed-item">loading‚Ä¶</div>
    </div>

</div>
    </div>
</aside>
    

    <!-- Footer -->
    <footer class="footer" id="footer">
        <div>INK REALM APP v3.6  | <font color="white">ton</font> @ <font color="red"> UQAc99MvKIcewbQFmOF_RvqpkAXZno0wiz3_BMsP87pJjSnB</font></div>
        <div>
            <a href="https://inkrealm.info" target="_blank">INKREALM.INFO</a>
            <span style="margin:0 8px">|</span>
            <a href="https://twitter.com/inkrealm" target="_blank">@INKREALM</a>
        </div>
    </footer>
    <script src="https://js.puter.com/v2/"></script>

<!-- MUST HAVE type="module" for WebLLM to work -->
<script type="module">
import { CreateMLCEngine } from "https://esm.run/@mlc-ai/web-llm@0.2.79";

class InkRealmTerminal {
    constructor() {
        this.engine = undefined;
        this.isGenerating = false;
        this.currentModel = 'smol-360';
        
        this.localModels = {
            "smol-360": "SmolLM2-360M-Instruct-q4f16_1-MLC",
            "qwen-tiny": "Qwen2.5-0.5B-Instruct-q4f16_1-MLC",
            "tiny-llama": "TinyLlama-1.1B-Chat-v1.0-q4f16_1-MLC-1k"
        };

        this.systemPrompt = "You are the INK REALM Neural Interface. Gritty, 1980s literary terminal aesthetic. Sharp prose.";
        this.init();
    }

    init() {
        this.runSplash();
        this.setupEvents();
        this.loadSavedKeys();
        // Hide Pollinations from list (used as silent fallback)
        const pollOpt = document.querySelector('option[value="pollinations"]');
        if (pollOpt) pollOpt.remove();

        setTimeout(() => this.connectSystem(), 1200);
        
        // Start feeds
        updatePoetryPulse();
        updateMarketFeed();
        setInterval(updatePoetryPulse, 300000);
        setInterval(updateMarketFeed, 60000);
    }

    runSplash() {
        const splash = document.getElementById('glitch-splash');
        setTimeout(() => {
            if (splash) {
                splash.style.opacity = '0';
                splash.style.transition = 'opacity 1s ease';
                setTimeout(() => {
                    splash.style.display = 'none';
                    // Reveal all hidden terminal components
                    document.querySelectorAll('.header, #writing-container, #notepad-panel, .footer').forEach(el => {
                        el.style.display = 'flex';
                    });
                }, 1000);
            }
        }, 3000);
    }

    async connectSystem() {
        const statusText = document.getElementById("status-text");
        const statusDot = document.getElementById("status-dot");
        if(statusText) statusText.textContent = "ONLINE";
        if(statusDot) statusDot.style.background = "#0f0";
    }

    loadSavedKeys() {
        const orKey = document.getElementById("or-key");
        if(orKey) {
            orKey.value = localStorage.getItem('ink_or_key') || "";
            orKey.addEventListener("change", (e) => localStorage.setItem('ink_or_key', e.target.value));
        }
    }

   setupEvents() {
    // 1. You MUST keep this line
    const modelSelect = document.getElementById("model-select");

    // 2. SAFETY CHECK: If modelSelect doesn't exist, don't crash
    if (modelSelect) {
        modelSelect.addEventListener("change", e => {
            this.currentModel = e.target.value;
            this.addSystemMessage(`TARGET MODEL ‚Üí ${e.target.options[e.target.selectedIndex].text}`);
            
            const keyArea = document.getElementById("byok-keys");
            const orKeyInput = document.getElementById("or-key");
            const vKeyInput = document.getElementById("v-key");
            const groqKeyInput = document.getElementById("groq-key");
            const hfKeyInput = document.getElementById("hf-key");

            if (this.currentModel === 'nova' || this.currentModel === 'dolphin') {
                if (keyArea) keyArea.style.display = "flex";
                if (orKeyInput) orKeyInput.style.display = "block";
                // Hide specific non-OR keys
                if (vKeyInput) vKeyInput.style.display = "none";
                if (groqKeyInput) groqKeyInput.style.display = "none";
                if (hfKeyInput) hfKeyInput.style.display = "none";
            } else {
                if (keyArea) keyArea.style.display = "none";
            }
        });
    }

    // 3. Setup other buttons with existence checks
    const sendBtn = document.getElementById("send-button");
    if (sendBtn) sendBtn.addEventListener("click", () => this.generate());

    const inputArea = document.getElementById("text-input");
    if (inputArea) {
        inputArea.addEventListener("keydown", e => {
            if (e.key === "Enter" && !e.shiftKey) { e.preventDefault(); this.generate(); }
        });
    }

    const loadBtn = document.getElementById('loadCoreBtn');
    if (loadBtn) loadBtn.addEventListener('click', () => this.activateLocalCore());

    // Auto-save OpenRouter key
    const orKeyInput = document.getElementById("or-key");
    if (orKeyInput) {
        orKeyInput.addEventListener("change", (e) => localStorage.setItem('ink_or_key', e.target.value));
    }

    document.addEventListener("click", e => {
        const id = e.target?.dataset?.import;
        if (id) this.importToScratchpad(id);
    });
}

    async activateLocalCore() {
        const modelId = this.localModels[this.currentModel];
        if (!modelId) return this.addSystemMessage("ERROR: SELECT A FEATHERWEIGHT CORE FIRST.");
        
        const btn = document.getElementById('loadCoreBtn');
        const status = document.getElementById('download-status');
        const bar = document.getElementById('progress-bar');
        const pPerc = document.getElementById('progress-percent');

        try {
            btn.disabled = true;
            btn.textContent = "SYNCING...";
            status.style.display = 'block';
            if (this.engine) await this.engine.unload();

            this.engine = await CreateMLCEngine(modelId, {
                initProgressCallback: (report) => {
                    const p = Math.round(report.progress * 100);
                    if(bar) bar.style.width = p + '%';
                    if(pPerc) pPerc.textContent = p;
                    if (p === 100) {
                        btn.textContent = "CORE ONLINE";
                        btn.style.color = "#0f0";
                        this.addSystemMessage(`LOCAL NEURAL CORE ${this.currentModel.toUpperCase()} ONLINE.`);
                    }
                }
            });
        } catch (e) {
            btn.disabled = false;
            btn.textContent = "GPU ERROR";
            this.addSystemMessage("WEBGPU FAILED. CHECK HARDWARE ACCELERATION.");
        }
    }

    async generate() {
        if (this.isGenerating) return;
        const input = document.getElementById("text-input");
        const sendBtn = document.getElementById("send-button");
        const prompt = input.value.trim();
        if (!prompt) return;

        this.isGenerating = true;
        sendBtn.disabled = true;
        this.addMessage("user", prompt);
        input.value = "";
        const loadingId = this.addLoading();

        try {
            // PATH 1: LOCAL
            if (this.localModels[this.currentModel] && this.engine) {
                this.removeLoading(loadingId);
                const msgEl = this.addMessage("ai", "");
                const contentEl = msgEl.querySelector(".message-content");
                const chunks = await this.engine.chat.completions.create({
                    messages: [{ role: "system", content: this.systemPrompt }, { role: "user", content: prompt }],
                    stream: true,
                });
                let fullText = "";
                for await (const chunk of chunks) {
                    fullText += chunk.choices[0]?.delta?.content || "";
                    contentEl.innerHTML = fullText.replace(/\n/g, "<br>");
                    document.getElementById("chat-messages").scrollTop = 99999;
                }
            } 
            // PATH 2: CLOUD (OpenRouter)
            else if (this.currentModel === 'nova' || this.currentModel === 'dolphin') {
                const key = document.getElementById("or-key").value;
                if (!key) throw new Error("KEY REQUIRED");
                const mId = this.currentModel === 'nova' ? "amazon/nova-lite-v1:free" : "cognitivecomputations/dolphin-mistral-24b-venice-edition:free";
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${key}`, "Content-Type": "application/json" },
                    body: JSON.stringify({ model: mId, messages: [{role: "system", content: this.systemPrompt}, {role: "user", content: prompt}] })
                });
                const data = await response.json();
                this.removeLoading(loadingId);
                const msgEl = this.addMessage("ai", "");
                window.typeText(msgEl.querySelector(".message-content"), data.choices[0].message.content);
            } else { throw new Error("FALLBACK"); }
        } catch (err) {
            // PATH 3: POLLINATIONS FALLBACK
            const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}?model=openai`);
            const fallbackText = await res.text();
            this.removeLoading(loadingId);
            const msgEl = this.addMessage("ai", "");
            window.typeText(msgEl.querySelector(".message-content"), fallbackText);
        } finally {
            this.isGenerating = false;
            sendBtn.disabled = false;
        }
    }

    addMessage(role, text) {
        const container = document.getElementById("chat-messages");
        const div = document.createElement("div");
        div.className = `message ${role}`;
        const header = role === "user" ? "USER" : "TERMINAL";
        if (role === "ai") {
            const id = "msg-" + Math.random().toString(36).slice(2);
            div.innerHTML = `<div class="message-header">${header}<span class="notepad-btn" data-import="${id}">‚Üí PAD</span></div><div class="message-content" id="${id}">${text}</div>`;
        } else {
            div.innerHTML = `<div class="message-header">${header}</div><div class="message-content">${text.replace(/\n/g, "<br>")}</div>`;
        }
        container.appendChild(div);
        container.scrollTop = container.scrollHeight;
        return div;
    }

    addSystemMessage(text) {
        const container = document.getElementById("chat-messages");
        const div = document.createElement("div");
        div.className = "message system";
        div.textContent = `‚üÅ ${text}`;
        container.appendChild(div);
    }

    addLoading() {
        const container = document.getElementById("chat-messages");
        const id = "loading-" + Date.now();
        const div = document.createElement("div");
        div.className = "message ai";
        div.id = id;
        div.innerHTML = `<div class="message-header">PROCESSING</div><div class="message-content loading-dots"></div>`;
        container.appendChild(div);
        container.scrollTop = container.scrollHeight;
        return id;
    }

    removeLoading(id) { const el = document.getElementById(id); if (el) el.remove(); }
    
    importToScratchpad(id) {
        const msg = document.getElementById(id);
        const pad = document.getElementById("notepad");
        if (msg && pad) {
            pad.value += `\n\n---\n${msg.innerText.trim()}`;
            pad.scrollTop = pad.scrollHeight;
        }
    }

    exportNotepad() {
        const blob = new Blob([document.getElementById("notepad").value], { type: "text/plain" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = `inkrealm-log-${Date.now()}.txt`;
        a.click();
    }
}

// Global Text Typist
window.typeText = function(el, text, speed = 12) {
    let i = 0;
    const interval = setInterval(() => {
        el.innerHTML += text[i++];
        if (i >= text.length) clearInterval(interval);
        const chat = document.getElementById("chat-messages");
        if(chat) chat.scrollTop = 99999;
    }, speed);
};

// Global Feed Handlers
/* Poetry Pulse */
async function updateNewsFeed() {
    const feedEl = document.getElementById("feed-news");
    try {
        const response = await fetch("https://poetrydb.org/random/3");
        const data = await response.json();
        if (data && data.length) {
            feedEl.innerHTML = data.map(poem => {
                let line = poem.lines[0].trim();
                if (line.length > 45) line = line.substring(0, 42) + "...";
                return `<div style="margin-bottom:10px"><div style="font-size:0.6rem;color:#666">${poem.author}</div><div style="color:#ccc;font-style:italic">"${line}"</div></div>`;
            }).join("");
        }
    } catch (e) { 
        console.error("Poetry fetch error:", e);
        feedEl.textContent = "‚Üí signal lost"; 
    }
}
updateNewsFeed();
setInterval(updateNewsFeed, 300000);


/* -----------------------------------------------------------
    MARKET FEED ‚Äî TON COIN
----------------------------------------------------------- */

async function updateMarketFeed() {
  try {
    const res = await fetch(
      "https://api.coingecko.com/api/v3/simple/price?ids=the-open-network&vs_currencies=usd&include_24hr_change=true"
    );
    const data = await res.json();
    console.log("CoinGecko response:", data); // Debug log

    const ton = data["the-open-network"];
    if (!ton) throw new Error("TON data missing");

    const price = ton.usd;
    const change = ton.usd_24h_change;
    const arrow = change >= 0 ? "‚ñ≤" : "‚ñº";

    document.getElementById("feed-market").textContent =
      `TON $${price.toLocaleString()} ${arrow}`;

  } catch (err) {
    console.error("Market feed error:", err);
    document.getElementById("feed-market").textContent = "TON ‚Äî no signal";
  }
}

// REMOVE the extra updateNewsFeed() call here:
// updateNewsFeed();  // <-- DELETE THIS LINE
updateMarketFeed();

setInterval(updateNewsFeed, 5 * 60 * 1000);   // every 5 minutes
setInterval(updateMarketFeed, 60 * 1000);     // every 1 minute

document.addEventListener("DOMContentLoaded", () => {
    window.app = new InkRealmTerminal();
});
</script>

    <script>
// ========== ARTICLE AUTO-SAVE TO URL (STANDALONE) ==========
(function() {
    const article = document.querySelector('article');
    if (!article) return;

    // Event listeners
    article.addEventListener('input', debounce(500, saveArticle));
    window.addEventListener('DOMContentLoaded', loadArticle);
    window.addEventListener('hashchange', loadArticle);

    // Load article from URL or localStorage
    async function loadArticle() {
        try {
            if (location.hash !== '') {
                await setArticle(location.hash);
            } else {
                const saved = localStorage.getItem('article-hash');
                if (saved) await setArticle(saved);
            }
            updateArticleTitle();
        } catch (e) {
            console.log('No article loaded');
        }
    }

    // Save article to URL and localStorage
    async function saveArticle() {
        const hash = await getArticleHash();
        if (location.hash !== hash) {
            history.replaceState({}, '', hash);
        }
        try { 
            localStorage.setItem('article-hash', hash);
        } catch (e) {}
        updateArticleTitle();
    }

    // Set article content from hash
    async function setArticle(hash) {
        const content = await decompressArticle(hash.slice(1));
        article.textContent = content;
    }

    // Get hash from article content
    async function getArticleHash() {
        const content = article.textContent;
        return '#' + await compressArticle(content);
    }

    // Update page title from article
    function updateArticleTitle() {
        const match = article.textContent.match(/^\n*#(.+)\n/);
        if (match) document.title = `${match[1]} - INK REALM`;
    }

    // Compress article content
    async function compressArticle(string) {
        const byteArray = new TextEncoder().encode(string);
        const stream = new CompressionStream('deflate-raw');
        const writer = stream.writable.getWriter();
        writer.write(byteArray);
        writer.close();
        const buffer = await new Response(stream.readable).arrayBuffer();
        return btoa(String.fromCharCode(...new Uint8Array(buffer)))
            .replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, "");
    }

    // Decompress article content
    async function decompressArticle(b64) {
        const byteArray = Uint8Array.from(
            atob(b64.replace(/-/g, "+").replace(/_/g, "/")), 
            c => c.charCodeAt(0)
        );
        const stream = new DecompressionStream('deflate-raw');
        const writer = stream.writable.getWriter();
        writer.write(byteArray);
        writer.close();
        const buffer = await new Response(stream.readable).arrayBuffer();
        return new TextDecoder().decode(buffer);
    }

    // Debounce helper
    function debounce(ms, fn) {
        let timer;
        return (...args) => {
            clearTimeout(timer);
            timer = setTimeout(() => fn(...args), ms);
        };
    }
})();
</script>
</body>
</html>
